{"version":3,"file":"ReactFifteenAdapter.js","names":["compositeTypeToNodeType","type","Error","childrenFromInst","inst","el","_renderedChildren","values","props","children","nodeType","_compositeType","instanceToTree","_currentElement","key","ensureKeyOrUndefined","ref","instance","_instance","_hostNode","rendered","map","_renderedComponent","eventOptions","animation","ReactFifteenAdapter","lifecycles","options","supportPrevContextArgumentOfComponentDidUpdate","legacyContextMode","componentDidUpdate","prevContext","getChildContext","calledByRenderer","assertDomAvailable","domNode","attachTo","global","document","createElement","adapter","render","context","callback","wrapperProps","Component","wrappingComponentProps","refProp","ReactWrapperComponent","createMountWrapper","wrappedEl","React","ReactDOM","setChildProps","unmount","unmountComponentAtNode","getNode","getNodeFromRootFinder","isCustomComponent","_reactInternalInstance","simulateEvent","node","event","mock","mappedEvent","mapNativeEventNames","eventFn","TestUtils","Simulate","TypeError","findDOMNode","batchedUpdates","fn","unstable_batchedUpdates","getWrappingComponentRenderer","getWrappingComponentMountRenderer","toTree","getMountWrapperInstance","renderer","ShallowRenderer","isDOM","cachedNode","withSetStateAllowed","elementToTree","output","getRenderOutput","internalInstance","args","handler","propFromEvent","contextTypes","childContextTypes","ContextWrapper","createRenderWrapper","ReactDOMServer","renderToStaticMarkup","mode","EnzymeAdapter","MODES","MOUNT","createMountRenderer","SHALLOW","createShallowRenderer","STRING","createStringRenderer","element","wrap","propsWithKeysAndRef","displayNameOfNode","isElement","object","isValidElementType","component","call","undefined","RootFinder","wrapWithWrappingComponent"],"sources":["../src/ReactFifteenAdapter.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\n// eslint-disable-next-line import/no-unresolved, import/extensions\nimport ReactDOMServer from 'react-dom/server';\n// eslint-disable-next-line import/no-unresolved, import/extensions\nimport TestUtils from 'react-dom/test-utils';\n// eslint-disable-next-line import/no-unresolved, import/extensions\nimport ShallowRenderer from 'react-test-renderer/shallow';\nimport values from 'object.values';\nimport { isElement, isValidElementType } from 'react-is';\nimport { EnzymeAdapter } from 'enzyme';\nimport {\n  displayNameOfNode,\n  elementToTree,\n  mapNativeEventNames,\n  propFromEvent,\n  withSetStateAllowed,\n  assertDomAvailable,\n  createRenderWrapper,\n  createMountWrapper,\n  propsWithKeysAndRef,\n  ensureKeyOrUndefined,\n  wrap,\n  RootFinder,\n  getNodeFromRootFinder,\n  wrapWithWrappingComponent,\n  getWrappingComponentMountRenderer,\n} from 'enzyme-adapter-utils';\n\nfunction compositeTypeToNodeType(type) {\n  switch (type) {\n    case 0:\n    case 1: return 'class';\n    case 2: return 'function';\n    default:\n      throw new Error(`Enzyme Internal Error: unknown composite type ${type}`);\n  }\n}\nfunction childrenFromInst(inst, el) {\n  if (inst._renderedChildren) {\n    return values(inst._renderedChildren);\n  }\n  if (el.props) {\n    return values({ '.0': el.props.children });\n  }\n  return [];\n}\n\nfunction nodeType(inst) {\n  if (inst._compositeType != null) {\n    return compositeTypeToNodeType(inst._compositeType);\n  }\n  return 'host';\n}\n\nfunction instanceToTree(inst) {\n  if (!inst || typeof inst !== 'object') {\n    return inst;\n  }\n  const el = inst._currentElement;\n  if (el == null || el === false) {\n    return null;\n  }\n  if (typeof el !== 'object') {\n    return el;\n  }\n  if (inst._renderedChildren) {\n    return {\n      nodeType: nodeType(inst),\n      type: el.type,\n      props: el.props,\n      key: ensureKeyOrUndefined(el.key),\n      ref: el.ref,\n      instance: inst._instance || inst._hostNode || null,\n      rendered: values(inst._renderedChildren).map(instanceToTree),\n    };\n  }\n  if (inst._hostNode) {\n    return {\n      nodeType: 'host',\n      type: el.type,\n      props: el.props,\n      key: ensureKeyOrUndefined(el.key),\n      ref: el.ref,\n      instance: inst._instance || inst._hostNode || null,\n      rendered: childrenFromInst(inst, el).map(instanceToTree),\n    };\n  }\n  if (inst._renderedComponent) {\n    return {\n      nodeType: nodeType(inst),\n      type: el.type,\n      props: el.props,\n      key: ensureKeyOrUndefined(el.key),\n      ref: el.ref,\n      instance: inst._instance || inst._hostNode || null,\n      rendered: instanceToTree(inst._renderedComponent),\n    };\n  }\n  return {\n    nodeType: nodeType(inst),\n    type: el.type,\n    props: el.props,\n    key: ensureKeyOrUndefined(el.key),\n    ref: el.ref,\n    instance: inst._instance || null,\n    rendered: childrenFromInst(inst, el).map(instanceToTree),\n  };\n}\n\nconst eventOptions = { animation: true };\n\nclass ReactFifteenAdapter extends EnzymeAdapter {\n  constructor() {\n    super();\n\n    const { lifecycles } = this.options;\n    this.options = {\n      ...this.options,\n      supportPrevContextArgumentOfComponentDidUpdate: true, // TODO: remove, semver-major\n      legacyContextMode: 'parent',\n      lifecycles: {\n        ...lifecycles,\n        componentDidUpdate: {\n          prevContext: true,\n        },\n        getChildContext: {\n          calledByRenderer: true,\n        },\n      },\n    };\n  }\n\n  createMountRenderer(options) {\n    assertDomAvailable('mount');\n    const domNode = options.attachTo || global.document.createElement('div');\n    let instance = null;\n    const adapter = this;\n    return {\n      render(el, context, callback) {\n        if (instance === null) {\n          const { type, props, ref } = el;\n          const wrapperProps = {\n            Component: type,\n            wrappingComponentProps: options.wrappingComponentProps,\n            props,\n            context,\n            ...(ref && { refProp: ref }),\n          };\n          const ReactWrapperComponent = createMountWrapper(el, { ...options, adapter });\n          const wrappedEl = React.createElement(ReactWrapperComponent, wrapperProps);\n          instance = ReactDOM.render(wrappedEl, domNode);\n          if (typeof callback === 'function') {\n            callback();\n          }\n        } else {\n          instance.setChildProps(el.props, context, callback);\n        }\n      },\n      unmount() {\n        ReactDOM.unmountComponentAtNode(domNode);\n        instance = null;\n      },\n      getNode() {\n        if (!instance) {\n          return null;\n        }\n        return getNodeFromRootFinder(\n          adapter.isCustomComponent,\n          instanceToTree(instance._reactInternalInstance),\n          options,\n        );\n      },\n      simulateEvent(node, event, mock) {\n        const mappedEvent = mapNativeEventNames(event, eventOptions);\n        const eventFn = TestUtils.Simulate[mappedEvent];\n        if (!eventFn) {\n          throw new TypeError(`ReactWrapper::simulate() event '${event}' does not exist`);\n        }\n        // eslint-disable-next-line react/no-find-dom-node\n        eventFn(ReactDOM.findDOMNode(node.instance), mock);\n      },\n      batchedUpdates(fn) {\n        return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      getWrappingComponentRenderer() {\n        return {\n          ...this,\n          ...getWrappingComponentMountRenderer({\n            toTree: (inst) => instanceToTree(inst._reactInternalInstance),\n            getMountWrapperInstance: () => instance,\n          }),\n        };\n      },\n    };\n  }\n\n  createShallowRenderer(/* options */) {\n    const renderer = new ShallowRenderer();\n    let isDOM = false;\n    let cachedNode = null;\n    return {\n      render(el, context) {\n        cachedNode = el;\n        /* eslint consistent-return: 0 */\n        if (typeof el.type === 'string') {\n          isDOM = true;\n        } else {\n          isDOM = false;\n          return withSetStateAllowed(() => renderer.render(el, context));\n        }\n      },\n      unmount() {\n        renderer.unmount();\n      },\n      getNode() {\n        if (isDOM) {\n          return elementToTree(cachedNode);\n        }\n        const output = renderer.getRenderOutput();\n\n        const internalInstance = renderer._instance;\n        return {\n          nodeType: compositeTypeToNodeType(internalInstance._compositeType),\n          type: cachedNode.type,\n          props: cachedNode.props,\n          key: ensureKeyOrUndefined(cachedNode.key),\n          ref: cachedNode.ref,\n          instance: internalInstance._instance,\n          rendered: elementToTree(output),\n        };\n      },\n      simulateEvent(node, event, ...args) {\n        const handler = node.props[propFromEvent(event, eventOptions)];\n        if (handler) {\n          withSetStateAllowed(() => {\n            // TODO(lmr): create/use synthetic events\n            // TODO(lmr): emulate React's event propagation\n            renderer.unstable_batchedUpdates(() => {\n              handler(...args);\n            });\n          });\n        }\n      },\n      batchedUpdates(fn) {\n        return withSetStateAllowed(() => renderer.unstable_batchedUpdates(fn));\n      },\n    };\n  }\n\n  createStringRenderer(options) {\n    return {\n      render(el, context) {\n        if (options.context && (el.type.contextTypes || options.childContextTypes)) {\n          const childContextTypes = {\n            ...(el.type.contextTypes || {}),\n            ...options.childContextTypes,\n          };\n          const ContextWrapper = createRenderWrapper(el, context, childContextTypes);\n          return ReactDOMServer.renderToStaticMarkup(React.createElement(ContextWrapper));\n        }\n        return ReactDOMServer.renderToStaticMarkup(el);\n      },\n    };\n  }\n\n  // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation\n  // specific, like `attach` etc. for React, but not part of this interface explicitly.\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  createRenderer(options) {\n    switch (options.mode) {\n      case EnzymeAdapter.MODES.MOUNT: return this.createMountRenderer(options);\n      case EnzymeAdapter.MODES.SHALLOW: return this.createShallowRenderer(options);\n      case EnzymeAdapter.MODES.STRING: return this.createStringRenderer(options);\n      default:\n        throw new Error(`Enzyme Internal Error: Unrecognized mode: ${options.mode}`);\n    }\n  }\n\n  wrap(element) {\n    return wrap(element);\n  }\n\n  // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed\n  // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should\n  // be pretty straightforward for people to implement.\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  nodeToElement(node) {\n    if (!node || typeof node !== 'object') return null;\n    return React.createElement(node.type, propsWithKeysAndRef(node));\n  }\n\n  elementToNode(element) {\n    return elementToTree(element);\n  }\n\n  nodeToHostNode(node) {\n    return ReactDOM.findDOMNode(node.instance);\n  }\n\n  displayNameOfNode(node) {\n    return displayNameOfNode(node);\n  }\n\n  isValidElement(element) {\n    return isElement(element);\n  }\n\n  isValidElementType(object) {\n    return isValidElementType(object);\n  }\n\n  isCustomComponent(component) {\n    return typeof component === 'function';\n  }\n\n  createElement(...args) {\n    return React.createElement(...args);\n  }\n\n  invokeSetStateCallback(instance, callback) {\n    // React in >= 15.4, and < 16 pass undefined to a setState callback\n    callback.call(instance, undefined);\n  }\n\n  wrapWithWrappingComponent(node, options) {\n    return {\n      RootFinder,\n      node: wrapWithWrappingComponent(React.createElement, node, options),\n    };\n  }\n}\n\nexport default ReactFifteenAdapter;\n"],"mappings":"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"}